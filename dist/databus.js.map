{"version":3,"sources":["../js/databus.js"],"names":["Object","value","exports","_pool","_interopRequireDefault","require","obj","instance","i","props","descriptor","_defineProperties","Constructor","DataBus","_classCallCheck","_createClass","key","temp"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _pool = _interopRequireDefault(require(\"./base/pool\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar instance;\n/**\n * 全局状态管理器\n */\n\nvar DataBus = /*#__PURE__*/function () {\n  function DataBus() {\n    _classCallCheck(this, DataBus);\n\n    if (instance) return instance;\n    instance = this;\n    this.pool = new _pool[\"default\"]();\n    this.reset();\n  }\n\n  _createClass(DataBus, [{\n    key: \"reset\",\n    value: function reset() {\n      this.frame = 0;\n      this.score = 0;\n      this.bullets = [];\n      this.enemys = [];\n      this.animations = [];\n      this.gameOver = false;\n    }\n    /**\n     * 回收敌人，进入对象池\n     * 此后不进入帧循环\n     */\n\n  }, {\n    key: \"removeEnemey\",\n    value: function removeEnemey(enemy) {\n      var temp = this.enemys.shift();\n      temp.visible = false;\n      this.pool.recover('enemy', enemy);\n    }\n    /**\n     * 回收子弹，进入对象池\n     * 此后不进入帧循环\n     */\n\n  }, {\n    key: \"removeBullets\",\n    value: function removeBullets(bullet) {\n      var temp = this.bullets.shift();\n      temp.visible = false;\n      this.pool.recover('bullet', bullet);\n    }\n  }]);\n\n  return DataBus;\n}();\n\nexports[\"default\"] = DataBus;"],"file":"databus.js"}